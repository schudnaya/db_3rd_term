-- MySQL Script generated by MySQL Workbench
-- Tue Sep 23 19:44:18 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

CREATE DATABASE IF NOT EXISTS internet_sales;
USE internet_sales;

CREATE TABLE users (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  fio VARCHAR(255) NOT NULL,
  login VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255),
  email VARCHAR(255),
  type VARCHAR(45)
);

CREATE TABLE shops (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  address VARCHAR(255),
  tel VARCHAR(100),
  site VARCHAR(100),
  email VARCHAR(100)
);

CREATE TABLE producttype (  -- Обратите внимание на название - без пробела!
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255)
);

CREATE TABLE products (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  shop_id INT NOT NULL,
  type_id INT NOT NULL,
  brand VARCHAR(255),
  model VARCHAR(255),
  data TINYTEXT,
  img VARCHAR(255),
  price DECIMAL(10,2),
  warranty VARCHAR(45),
  FOREIGN KEY (shop_id) REFERENCES shops(id),
  FOREIGN KEY (type_id) REFERENCES producttype(id)
);

CREATE TABLE orders (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  shop_id INT NOT NULL,
  product_id INT NOT NULL,
  user_id INT NOT NULL,
  date DATE,
  quantity INT,
  tel VARCHAR(100),
  confirm TINYINT(1),
  FOREIGN KEY (shop_id) REFERENCES shops(id),
  FOREIGN KEY (product_id) REFERENCES products(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE deliveries (
  order_id INT NOT NULL PRIMARY KEY,
  user_id INT NOT NULL,
  address VARCHAR(255),
  time VARCHAR(45),
  date DATE,
  confirm TINYINT(1),
  FOREIGN KEY (order_id) REFERENCES orders(id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
